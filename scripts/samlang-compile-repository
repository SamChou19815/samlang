#!/bin/bash

# Fail on any integration test fail.
set -e

./samlang-dev compile

# X86
./scripts/run-programs.js

# Java
echo 'Checking generated Java code...' >&2
find out/java/ -name "*.java" > sources.txt
javac -cp ./out/java @sources.txt
rm ./out/java/**/*.class
rm sources.txt
